{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchImages = (searchedQuery, currentPage, perPage) => {\n  const axiosOptions = {\n    params: {\n      key: '48264895-d0a6c310440d31e1e67da8433',\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: perPage,\n    },\n  };\n\n  return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n","export function createGalleryCardTemplate(imgInfo) {\n  return `<li class=\"gallery-card\">\n        <a href=\"${imgInfo.largeImageURL}\" class=\"gallery-link\">\n          <img class=\"img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" width=\"360\" />\n          <div class=\"info-wrapper\">\n            <div class=\"img-info\">\n              <p class=\"label\">Likes</p>\n              <p class=\"value\">${imgInfo.likes}</p>\n            </div>\n            <div class=\"img-info\">\n              <p class=\"label\">Views</p>\n              <p class=\"value\">${imgInfo.views}</p>\n            </div>\n            <div class=\"img-info\">\n              <p class=\"label\">Comments</p>\n              <p class=\"value\">${imgInfo.comments}</p>\n            </div>\n            <div class=\"img-info\">\n              <p class=\"label\">Downloads</p>\n              <p class=\"value\">${imgInfo.downloads}</p>\n            </div>\n          </div>\n        </a>\n      </li>`;\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { createGalleryCardTemplate } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn');\n\nconst perPage = 15;\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet searchedQuery = '';\nlet totalPages = 0;\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedQuery = event.currentTarget.elements.user_query.value.trim();\n\n    if (searchedQuery === '') {\n      iziToast.show({\n        title: 'Error:',\n        message: 'Поле має бути заповнено!!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    page = 1;\n\n    loadMoreBtnEl.classList.add('is-hidden');\n\n    loaderEl.classList.remove('hidden');\n\n    const { data } = await fetchImages(searchedQuery, page, perPage);\n\n    loaderEl.classList.add('hidden');\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        title: 'Error:',\n        message: `За вашим запитом нічого не знайдено!`,\n        position: 'topRight',\n      });\n\n      galleryEl.innerHTML = '';\n      searchFormEl.reset();\n      return;\n    }\n\n    totalPages = Math.ceil(data.totalHits / perPage);\n\n    if (totalPages > 1) {\n      loadMoreBtnEl.classList.remove('is-hidden');\n      loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n    } else {\n      iziToast.info({\n        message: `Нажаль це всі результати за Вашим запитом: ${searchedQuery}`,\n        position: 'topRight',\n      });\n    }\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.innerHTML = galleryTemplate;\n    searchFormEl.reset();\n\n    lightbox.refresh();\n  } catch (err) {\n    loaderEl.classList.add('hidden');\n    iziToast.show({\n      title: 'Error',\n      message: `Помилка: ${err.message}`,\n      position: 'topRight',\n    });\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nconst onLoadMoreBtnClick = async event => {\n  try {\n    page++;\n\n    const { data } = await fetchImages(searchedQuery, page, perPage);\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    lightbox.refresh();\n\n    const firstCard = galleryEl.querySelector('.gallery-card');\n    const cardHeight = firstCard.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (page === totalPages) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n\n      iziToast.info({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n        position: 'topRight',\n      });\n    }\n  } catch (err) {\n    iziToast.show({\n      title: 'Error',\n      message: `Помилка: ${err.message}`,\n      position: 'topRight',\n    });\n  }\n};\n"],"names":["fetchImages","searchedQuery","currentPage","perPage","axiosOptions","axios","createGalleryCardTemplate","imgInfo","searchFormEl","galleryEl","loaderEl","loadMoreBtnEl","lightbox","SimpleLightbox","page","totalPages","onSearchFormSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","err","cardHeight"],"mappings":"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"}